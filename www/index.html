<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Home Automation</title>
        <script src="./js/createjs_1.1_min.js"></script>
        <script src="./js/zim_10.js"></script>
        <script>

        const color = light;
        const outerColor = dark;
        const assets = ["christmas-lights.png", "fan.png", "light-bulb.png", "pool.png"];
        const path = "assets/";

        STYLE = {
            type: {
                Label: {
                    // centerReg: true,
                    valign: "center",
                    outline: true
                }
            }
        }

        const frame = new Frame({color, outerColor, assets, path});
        frame.on("ready", () => {
            zog("Ready from ZIM Frame");

            const stage = frame.stage;
            let stageW = frame.width;
            let stageH = frame.height;

            // Put your code here:

            // ASSETS
            const christmasLights = frame.asset("christmas-lights.png");
            const lightBulb = frame.asset("light-bulb.png");
            const fan = frame.asset("fan.png");

            // BACKYARD
            const backyard = new Container(stageW, stageH);
            const back1 = new Rectangle(stageW, stageH, green).addTo(backyard);
            const title1 = new Label("Backyard").addTo(backyard).pos(50, 50);

            const yardLights = christmasLights.clone().centerReg(backyard).expand();
            yardLights.id = "48003";
            const labelYardLights = new Label("Yard Lights").centerReg(backyard);

            const poolHouseFanLight = lightBulb.clone().centerReg(backyard).expand();
            poolHouseFanLight.id = "05 15 92 1";
            const labelPoolHouseFanLight = new Label("Fan Light").centerReg(backyard);

            const poolHouseFan = fan.clone().centerReg(backyard).expand();
            poolHouseFan.id = "4090";
            const labelPoolHouseFan = new Label("Fan").centerReg(backyard);

            const poolHouseLight = lightBulb.clone().centerReg(backyard).expand();
            poolHouseLight.id = "05 15 D7 1";
            const labelPoolHouseLight = new Label("Pool House Lights").centerReg(backyard);

            const poolLight = frame.asset("pool.png").centerReg(backyard).expand();
            poolLight.id = "10063";
            const labelPoolLight = new Label("Pool Lights").centerReg(backyard);

            const backyardArray = [yardLights, poolHouseFanLight, poolHouseFan, poolHouseLight, poolLight];
            for (var i=0; i<backyardArray.length; i++) {
                backyardArray[i].tap(function (e) {
                    if (e.target.alpha == 1) {
                        e.target.alpha = 0.5;
                        stage.update();
                    } else {
                        e.target.alpha = 1;
                        stage.update();
                    }
                });
            }

            // BASEMENT
            const basement = new Container(stageW, stageH);
            const back2 = new Rectangle(stageW, stageH, blue).addTo(basement);
            const title2 = new Label("Basement").addTo(basement).pos(50, 50);

            const basementAllLights = lightBulb.clone().sca(0.25).addTo(basement).pos(600, 450).expand();
            const labelBAL = new Label("All Lights").addTo(basement).pos(800, 500);
            basementAllLights.id = "26239";

            const basementFrontLight = lightBulb.clone().sca(0.25).addTo(basement).pos(50, 150).expand();
            const labelBFL = new Label("Front Lights").addTo(basement).pos(250, 200);
            basementFrontLight.id = "5 14 FF 1";

            const basementBackLight = lightBulb.clone().sca(0.25).addTo(basement).pos(50, 300).expand();
            const labelBBL = new Label("Back Lights").addTo(basement).pos(250, 350);
            basementBackLight.id = "5 16 6F 1";

            const basementFrontAlcove = lightBulb.clone().sca(0.25).addTo(basement).pos(50, 450).expand();
            const labelBFA = new Label("Front Alcove").addTo(basement).pos(250, 500);
            basementFrontAlcove.id = "B A4 4E 1";

            const basementBackAlcove = lightBulb.clone().sca(0.25).addTo(basement).pos(50, 600).expand();
            const labelBBA = new Label("Back Alcove").addTo(basement).pos(250, 650);
            basementBackAlcove.id = "B A5 BA 1";

            const basementHallway = lightBulb.clone().sca(0.25).addTo(basement).pos(50, 750).expand();
            const labelBH = new Label("Hallway Light").addTo(basement).pos(250, 800);
            basementHallway.id = "63722";

            const basementArray = [basementAllLights, basementFrontLight, basementBackLight, basementFrontAlcove, basementBackAlcove, basementHallway];
            for (var i=0; i<basementArray.length; i++) {
                basementArray[i].tap(function (e) {
                    if (e.target.alpha == 1) {
                        e.target.alpha = 0.5;
                        stage.update();
                    } else {
                        e.target.alpha = 1;
                        stage.update();
                    }
                });
            }

            // PAGE CONTROL
            const pages = new Pages([
                {page:backyard, swipe:[basement, basement]},
                {page:basement, swipe:[backyard, backyard]}
            ], "slide").addTo();

            // RESPONSIVE
            var factor = 0.25;
            var marginX = 0.25;
            var spacingX = 0.5;
            var marginY = 0.25;
            var spacingY = 0.15;

            frame.on("resize", () => {
                stageW = frame.width;
                stageH = frame.height;
                // zog(stageW, stageH);
                back1.scaleTo(stage, 100, 100, "both");
                back2.scaleTo(stage, 100, 100, "both");
                // backyard placement
                yardLights.siz(stageW*factor).loc(stageW*marginX, stageH*(marginY+spacingY*0));
                labelYardLights.siz(stageW*factor).loc(stageW*(marginX+spacingX), stageH*(marginY+spacingY*0));
                poolHouseFanLight.siz(stageW*factor).loc(stageW*marginX, stageH*(marginY+spacingY*1));
                labelPoolHouseFanLight.siz(stageW*factor).loc(stageW*(marginX+spacingX), stageH*(marginY+spacingY*1));
                poolHouseFan.siz(stageW*factor).loc(stageW*marginX, stageH*(marginY+spacingY*2));
                labelPoolHouseFan.siz(stageW*factor).loc(stageW*(marginX+spacingX), stageH*(marginY+spacingY*2));
                poolHouseLight.siz(stageW*factor).loc(stageW*marginX, stageH*(marginY+spacingY*3));
                labelPoolHouseLight.siz(stageW*factor).loc(stageW*(marginX+spacingX), stageH*(marginY+spacingY*3));
                poolLight.siz(stageW*factor).loc(stageW*marginX, stageH*(marginY+spacingY*4));
                labelPoolLight.siz(stageW*factor).loc(stageW*(marginX+spacingX), stageH*(marginY+spacingY*4));
                pages.resize();
                stage.update();
            });

            stage.update();

        });

        </script>

        <meta name="viewport" content="width=device-width, user-scalable=no" />
    </head>
    <body>

    </body>
</html>
